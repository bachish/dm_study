# Реляционная модель данных
## Основные понятия
### Домен
Домен -  множество значений, обладающих некоторыми общими свойствами. Предполагается, что все значения, находящиеся в доменах, являются скалярными константами. Требуется, чтобы на любом домене было определено бинарное отношение равенства.  
На домене можно определять функции и операции. Домен может быть поддоменом другого. Можно сказать, что домен - аналог абстрактного типа данных. 

### Отношение (таблица)
Это n-местный (или n-арный) предикат, т. е. функция с n аргументами, принимающая булево значение: истина (true) или ложь (false). При этом предполагается, что для каждого аргумента задан домен, из которого могут выбираться значения этого аргумента.  
Описывает зависимости между своими атрибутами.

Атрибут (колонка) - именнованный аргумент отношения. Каждый атрибут связан с доменом.  
Схема отношения - множество всех его атрибутов.  

Кортеж (строка) - совокупность из n значений, по одному значению (из соответствующего домена) для каждого атрибута ~~ набор значений аргументов, для которого можно вычислить предикат, соответствующий отношению.  
Значения в кортеже взаимосвязаны, если он принадлежит отношению.

Кардинальность отношения - количество кортежей в отношении.  
В теоретической реляционной модели данных предполагается, что все кортежи, входящие в отношение, различны, и поэтому совокупность кортежей отношения является множеством (в математическом смысле).

## Реляционная алгебра
Алгебра - множество объектов и операций над ними.

Определена на множестве всех возможных конечных отношений. Способ выполнения запросов, вычисление подмножеств с помощью формул из исходных множеств. 

### Реляционные исчисления 
*  предикаты, построенные с помощью логических функций и кванторов, скобок
* не допускаеся рекурсия 
* все реляционные языки эквивалентны

### Теоретико-множественные операции
можно применять обычные теоретико-множественные операции к любой паре отношений, имеющих одинаковые схемы:

* Объединение UNION: в результат включаются кортежи, входящие в первый или
во второй аргумент.
* Пересечение INTERSECT: результат содержит только кортежи, входящие в первый и второй аргументы.
* Разность EXCEPT: результат содержит кортежи, входящие в первый и не входящие во второй аргумент. В некоторых вариантах алгебры эта операция
называется MINUS
* Производные операции, н-р xor: (R UNION S) EXCEPT (R INTERSECT S) ~ (R EXCEPT S) UNION (S EXCEPT R).

В реляционной алгебре нет теоретико-множественной операции
дополнения. Это связано с тем, что отношения должны быть конечными множествами, а многие домены бесконечны.

### Унарные операции
Позволяют выделить из отношения ту информацию, которая нужна данному приложению при данном выполнении.
* Проекция PROJ: включает в результат подмножество атрибутов отношения, переданного в качестве аргумента. Т.е. могут возникнуть дубликаты. Реляционная операция проекции обязательно исключает
возникшие дубликаты, а фактические - по требованию.
* Фильтрация FILTER: строит новое отношение, включая в него строки
исходного отношения, удовлетворяющие условию

### Произведение и соединение

* PROD прямое (декартово) произведение,  CROSS_JOIN: строит все пары кортежей из первого и второго аргументов и по каждой такой паре создает кортеж результата, содержащий все значения атрибутов кортежей, входящих в эту пару.  
 Необходимо, чтобы все имена атрибутов аргументов данной операции были
различными. Для этого перед выполнением операции надо переименовать атрибуты с совпадающими именами в одном из отношений  
R1×R2
* JOIN соединение (): тело состоит из кортежей, полученных всевозможными соединениями кортежей R1 и R2, имеющих равные значения одноимённых атрибутов  
R1⋈R2   
произведение + фильтрация 


### Эквивалентность реляционных языков запросов
Любой запрос, выразимый в реляционном исчислении можно выразить в реляционной алгебре, и обратно. 

Реляционные языки декларативны. С помощью алгебраических тождеств можно получить один и тот же результат с помощью различных выражений, которые будут эквивалентны. 

Почему это важно? Запросы эквивалентны по результату, но не по времени исчисления. Среди них системой выбирается наиболее эффективный.

Почему только двумерные таблицы? Т.е. скалярные атрибуты? Как эти таблички хранятся в памяти - реляционной теории не важны.

### Тождества
Коммутативность и ассоциативность для: пересечения, произведения и соединения.

Дистрибутивность. Пары операций объединения, пересечения, произведения
(или соединения) подчиняются дистрибутивным законам.
Пересечение дистрибутивно относительно объединения:  
R INTERSECT (S UNION T) = (R INTERSECT S) UNION (R INTERSECT T).
Объединение дистрибутивно относительно пересечения:  
R UNION (S INTERSECT T) = (R UNION S) INTERSECT (R UNION T).
Произведение и соединение дистрибутивны относительно операций объединения и пересечения:  
R PROD (S UNION T) = (R PROD S) UNION (R PROD T);  
R PROD (S INTERSECT T) = (R PROD S) INTERSECT (R PROD T).


